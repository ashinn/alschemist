<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from sassy.tex by tex2page, v 20070609
(running on MzScheme 4.0.1, unix), 
(c) Dorai Sitaram, 
http://www.ccs.neu.edu/~dorai/tex2page/tex2page-doc.html

-->
<head>
<title>
Sassy - 0.2.1
</title>
<link rel="stylesheet" type="text/css" href="sassy-Z-S.css" title=default>
<meta name="robots" content="index,follow">
</head>
<body>
<div id=slidecontent>
<div align=right class=navigation>[Go to <span><a href="sassy.html">first</a>, <a href="sassy-Z-H-7.html">previous</a></span><span>, <a href="sassy-Z-H-9.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="sassy-Z-H-1.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="sassy-Z-H-13.html#node_index_start">index</a></span>]</div>
<p></p>
<a name="node_chap_7"></a>
<h1 class=chapter>
<div class=chapterheading><a href="sassy-Z-H-1.html#node_toc_node_chap_7">Chapter 7</a></div><br>
<a href="sassy-Z-H-1.html#node_toc_node_chap_7">Output</a></h1>
<p>
<a name="node_idx_244"></a></p>
<p>
<a name="node_tag_Temp_18"></a></p>
<p>
The annotation &#8220;<u>default</u>:&#8221; indicates the default value
the function returns if nothing in the object that
<code class=verbatim>sassy</code> assembled affected that particular value. For example, if no <code class=scheme><span class=keyword>align</span></code> forms were given in any <code class=scheme><span class=keyword>data</span></code> directives, <code class=verbatim>(sassy-data-align &lt;sassy-output&gt;)</code> returns the default value <code class=verbatim>4</code>.</p>
<p>

</p>
<a name="node_sec_7.1"></a>
<h2 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.1">7.1&nbsp;&nbsp;Record-types</a></h2>
<p>
<a name="node_idx_246"></a></p>
<p>
The names of the interfaces for the following data types are conventional. That is, for each of the following types, <i>name</i> is the indicated name of the type (the name in the heading), <i>getter</i> is any getter procedure listed, and
</p>
<ul>
<li><p>the constructor procedure is <code class=verbatim>make-</code><i>name</i>
</p>
<li><p>the predicate procedure is <i>name</i><code class=verbatim>?</code>
</p>
<li><p>the setter procedures are <i>getter</i><code class=verbatim>-set!</code>
</p>
<p>

</p>
<a name="node_sec_7.1.1"></a>
<h3 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.1.1">7.1.1&nbsp;&nbsp;<i>sassy-output</i></a></h3>
<p>
<a name="node_idx_248"></a></p>
<p>
<a name="node_idx_250"></a>&#8212;procedure: <strong>sassy-symbol-table</strong> <i>sassy-output -&gt; hash-table</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: an empty <i>hash-table</i>
<br>
The <i>hash-table</i> contains one entry for each of the symbols present in the object that <code class=verbatim>sassy</code> assembled. The keys of the <i>hash-table</i> are Scheme <i>symbols</i>. The values are records of type <i>sassy-symbol</i>.
</blockquote><p>
<a name="node_idx_252"></a>&#8212;procedure: <strong>sassy-reloc-list</strong> <i>sassy-output -&gt; list</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>'()</code>
<br>
The <i>list</i> contains all the relocations that <code class=verbatim>sassy</code> recorded. Each relocation is a record of type <i>sassy-reloc</i>.
</blockquote><p>
<a name="node_idx_254"></a>&#8212;procedure: <strong>sassy-entry-point</strong> <i>sassy-output -&gt; symbol</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>#f</code>
<br>
The <i>symbol</i> indicates the main entry point of the program.
</blockquote><p>
<a name="node_idx_256"></a>&#8212;procedure: <strong>sassy-data-stack</strong> <i>sassy-output -&gt; pushdown-stack</i><br>

<a name="node_idx_258"></a>&#8212;procedure: <strong>sassy-text-stack</strong> <i>sassy-output -&gt; pushdown-stack</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: an empty <i>pushdown-stack</i>
<br>
The <i>pushdown-stacks</i> contain the contents (bytes, represented as positive integers) of their respective sections. Wherever appropriate, byte-representations of numerical arguments and data are in little-endian order.
</blockquote><p>
<a name="node_idx_260"></a>&#8212;procedure: <strong>sassy-heap-size</strong> <i>sassy-output -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>0</code>
<br>
The <i>integer</i> is the total size of the heap, in bytes.
</blockquote><p>
<a name="node_idx_262"></a>&#8212;procedure: <strong>sassy-text-org</strong> <i>sassy-output -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>0</code>
<br>
The <i>integer</i> is the absolute address at which the text section
should be loaded.
</blockquote><p>
For the following, if no <code class=scheme><span class=keyword>align</span></code> forms were designated for the
appropriate section, or no alignments greater than the default value
were designated, the default value is present. Otherwise the largest
value that was specified for the appropriate section is present. In
all cases, the <i>integers</i> present will be a positive power of 2,
and indicate the alignment requirements, in bytes, of the particular
section.</p>
<p>
<a name="node_idx_264"></a>&#8212;procedure: <strong>sassy-heap-align</strong> <i>sassy-output -&gt; integer</i><br>

<a name="node_idx_266"></a>&#8212;procedure: <strong>sassy-data-align</strong> <i>sassy-output -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>4</code>
<br>

</blockquote><p>
<a name="node_idx_268"></a>&#8212;procedure: <strong>sassy-text-align</strong> <i>sassy-output -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>16</code>
<br>

</blockquote><p>

</p>
<a name="node_sec_7.1.2"></a>
<h3 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.1.2">7.1.2&nbsp;&nbsp;<i>sassy-symbol</i></a></h3>
<p>
<a name="node_idx_270"></a></p>
<p>
<a name="node_idx_272"></a>&#8212;procedure: <strong>sassy-symbol-name</strong> <i>sassy-symbol -&gt; symbol</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <i>symbol</i>
<br>
The <i>symbol</i> is the name of the symbol or label.
</blockquote><p>
<a name="node_idx_274"></a>&#8212;procedure: <strong>sassy-symbol-scope</strong> <i>sassy-symbol -&gt; scope</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>'local</code>
<br>
The <i>scope</i> is either <code class=verbatim>'local</code>, <code class=verbatim>'import</code>, or
<code class=verbatim>'export</code>. (In the following, &#8220;object&#8221; means object-file, module, unit of
compilation, etc.) 
<ul>
<li><p>A <i>scope</i> of <code class=verbatim>'local</code> is meant to denote a symbol declared in the current object that other objects will not link to. 
</p>
<li><p>A <i>scope</i> of <code class=verbatim>'import</code> is meant to denote a symbol declared in another object that the current object will link to. (Other assemblers use a term like &#8220;extern&#8221; for these.) 
</p>
<li><p>A <i>scope</i> of <code class=verbatim>'export</code> is meant to denote a symbol declared in the current object that other objects will link to. (Other assemblers refer to these as, for instance &#8220;global&#8221;.)
</p>
</ul><p>
The meaning of &#8220;declared&#8221; in regards to these can be fuzzy. For instance, when writing ELF shared objects, one exports the symbol <code class=verbatim>_GLOBAL_OFFSET_TABLE_</code>, even though that symbol is never assigned a location in the Sassy program itself. Instead the linker <code class=verbatim>ld</code> &#8220;fully declares&#8221; it.
</p>
</blockquote><p>
<a name="node_idx_276"></a>&#8212;procedure: <strong>sassy-symbol-section</strong> <i>sassy-symbol -&gt; section</i><br>

<a name="node_idx_278"></a>&#8212;procedure: <strong>sassy-symbol-offset</strong> <i>sassy-symbol -&gt; integer</i><br>

<a name="node_idx_280"></a>&#8212;procedure: <strong>sassy-symbol-size</strong> <i>sassy-symbol -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>#f</code>
<br>
If any of these are <code class=verbatim>#f</code>, then they all are <code class=verbatim>#f</code>. This means that the symbol was never declared (assigned a location) in the object. This happens, for instance, when you <code class=scheme><span class=keyword>import</span></code> a symbol.
<ul>
<li><p>The <i>section</i> is either <code class=verbatim>'text</code>, <code class=verbatim>'data</code>, or
<code class=verbatim>'heap</code>, and indicates the section in which the symbol was defined.
</p>
<li><p>The <i>offset</i> indicates the offset in bytes from the base of the symbol&#8217;s section to the symbol&#8217;s definition.
</p>
<li><p>The <i>size</i> indicates the size in bytes of the items encapsulated by the symbol&#8217;s definition.
</p>
</ul><p>
</p>
</blockquote><p>
<a name="node_idx_282"></a>&#8212;procedure: <strong>sassy-symbol-unres</strong> <i>sassy-symbol -&gt; list</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>'()</code>
<br>
The <i>list</i> is a list of functions used internally by Sassy to perform backpatching. You may safely ignore (the contents of) this field.
</blockquote><p>

</p>
<a name="node_sec_7.1.3"></a>
<h3 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.1.3">7.1.3&nbsp;&nbsp;<i>sassy-reloc</i></a></h3>
<p>
<a name="node_idx_284"></a></p>
<p>
<a name="node_tag_Temp_19"></a></p>
<p>
<a name="node_idx_286"></a>&#8212;procedure: <strong>sassy-reloc-name</strong> <i>sassy-reloc -&gt; symbol</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>#f</code>
<br>
This returns the name of the label, or &#8220;target&#8221; that this relocation refers to. If this value is <code class=verbatim>#f</code>, the relocation is &#8220;anonymous&#8221;. Usages of <code class=scheme><span class=keyword>$win</span></code>, <code class=scheme><span class=keyword>$lose</span></code>, <code class=scheme><span class=keyword>$eip</span></code>, and <code class=scheme><span class=keyword>locals</span></code> may cause this. As well, the second argument in a custom relocation affects this value.
</blockquote><p>
<a name="node_idx_288"></a>&#8212;procedure: <strong>sassy-reloc-section</strong> <i>sassy-reloc -&gt; section</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: the section
<br>
This is the section in which to apply the relocation (<code class=verbatim>'text</code> or <code class=verbatim>'data</code>).
</blockquote><p>
<a name="node_idx_290"></a>&#8212;procedure: <strong>sassy-reloc-target-section</strong> <i>sassy-reloc -&gt; section</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: the section
<br>
Returns the name of the section (<code class=verbatim>'text</code> <code class=verbatim>'data</code> or <code class=verbatim>'heap</code>) in which the target of the relocation is defined.
</blockquote><p>
<a name="node_idx_292"></a>&#8212;procedure: <strong>sassy-reloc-offset</strong> <i>sassy-reloc -&gt; integer)</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>0</code>
<br>
This is the offset from the base of the section, in bytes, of the relocation&#8217;s field (i.e. the address at which to apply the relocation).
</blockquote><p>
<a name="node_idx_294"></a>&#8212;procedure: <strong>sassy-reloc-type</strong> <i>sassy-reloc -&gt; symbol</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: all relocations have a type
<br>
The type of a relocation is a symbol that should be used to instruct the output module how to compute the final value in the relocation&#8217;s field. By default, Sassy utilizes two types:
<ul>
<li><p><code class=verbatim>'abs</code> relocations are meant to denote those whose final value in their field should be:</p>
<p>
</p>
<pre class=verbatim>(+ &lt;the load address of the target's section&gt; &nbsp;
   &lt;the target's offset into it's section&gt;)&nbsp;
</pre><p></p>
<p>
</p>
<li><p><code class=verbatim>'rel</code> relocations are meant to denote those whose final value in their field is some relative offset from the address of the relocation&#8217;s field. Sassy generates these for normal usages of branch instructions, and the value present is the distance to the target from the address immediately following the relocation&#8217;s field.
</p>
</ul><p></p>
<p>
Or the type may be one specified by a usage of a custom relocation, and will be output module-specific.  For instance, when targeting the included ELF output module, one can write <code class=scheme>(<span class=keyword>reloc</span> <span class=variable>plt</span> <span class=variable>foo</span>)</code>, which means that the type of the relocation will be <code class=verbatim>'plt</code>, and that the ELF output module should make an entry in the object-file&#8217;s relocation table of type <code class=verbatim>R_386_PLT32</code>.</p>
<p>
</p>
</blockquote><p>
<a name="node_idx_296"></a>&#8212;procedure: <strong>sassy-reloc-patcher</strong> <i>sassy-reloc -&gt; procedure</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: always present
<br>
The procedure is a procedure of one argument, an <i>integer</i>. When applied, the procedure does two things - it changes the value of the relocation&#8217;s field in the appropriate <i>push-stack</i> (or its list) to be the little-endian byte representation of the <i>integer</i>, and it updates the <i>reloc-value</i> field of the relocation&#8217;s record with the <i>integer</i>.
</blockquote><p>
<a name="node_idx_298"></a>&#8212;procedure: <strong>sassy-reloc-value</strong> <i>sassy-reloc -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>0</code>
<br>
The value is the integer representation of the field&#8217;s current value. It is automatically updated by the application of the relocation&#8217;s patcher function. The third argument in a custom relocation is added to the value otherwise present.
</blockquote><p>
<a name="node_idx_300"></a>&#8212;procedure: <strong>sassy-reloc-width</strong> <i>sassy-reloc -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>4</code>
<br>
The width is the width, in bytes, of the relocation field. Currently, since Sassy only records dword-sized relocations, this value is always 4
</blockquote>
.<p>

</p>
<a name="node_sec_7.2"></a>
<h2 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.2">7.2&nbsp;&nbsp;Additional procedures for <i>sassy-output</i></a></h2>
<p>
<a name="node_idx_302"></a></p>
<p>
The following are extra procedures for accessing <i>sassy-output</i>. They are external to the record-type definition of <i>sassy-output</i>.</p>
<p>
<a name="node_idx_304"></a>&#8212;procedure: <strong>sassy-data-list</strong> <i>sassy-output -&gt; list-of-bytes</i><br>

<a name="node_idx_306"></a>&#8212;procedure: <strong>sassy-text-list</strong> <i>sassy-output -&gt; list-of-bytes</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>'()</code>
<br>
Returns the actual <i>list-of-bytes</i> that comprise the exact contents of the text or data sections. The bytes are expressed as positive integers, and wherever appropriate, numerical arguments and data are in little-endian order.
</blockquote><p>
<a name="node_idx_308"></a>&#8212;procedure: <strong>sassy-text-size</strong> <i>sassy-output -&gt; integer</i><br>

<a name="node_idx_310"></a>&#8212;procedure: <strong>sassy-data-size</strong> <i>sassy-output -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
<u>default</u>: <code class=verbatim>0</code>
<br>
The <i>integer</i> indicates the total size in bytes of the contents of the text or data sections.
</blockquote><p>
<a name="node_idx_312"></a>&#8212;procedure: <strong>sassy-symbol-exists?</strong> <i>sassy-output symbol -&gt; varies</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
If <i>symbol</i> is present in <i>sassy-output</i>, its record (of type <i>sassy-symbol</i>) in the symbol table is returned. Otherwise <code class=verbatim>#f</code> is returned.
</blockquote><p>

</p>
<a name="node_sec_7.3"></a>
<h2 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.3">7.3&nbsp;&nbsp;<i>push-stacks</i></a></h2>
<p>
<a name="node_idx_314"></a></p>
<p>
Push-stacks are wrappers around Scheme lists that create stack-like
objects that normally can only grow. They can not be popped (but their
state may be saved and restored). Push-stacks are built for speed
but BEWARE! Pushing a list onto a push-stack calls set-cdr! either
on the stack or the list, so don&#8217;t push quoted (literal) lists onto a
push-stack or infinite loops may eventually occur!<a name="node_call_footnote_Temp_20"></a><sup><small><a href="#node_footnote_Temp_20">1</a></small></sup></p>
<p>
As well, mutating a list after it has been pushed on to a push-stack
will mutate the stack as well. This is on purpose, since pushing onto
a push-stack returns the pointer to the pushed item in the stack. By
saving that pointer (a list) you can mutate the contents of a
push-stack as fast as you can mutate a vector, even if the push-stack
gets appended! to another.</p>
<p>
Sassy uses push-stacks for its sequence-type accumulators (the data section and text section) because they provide:</p>
<p>
</p>
<ul>
<li><p>linear time accumulation of items (like a vector)
</p>
<li><p>constant time access to the contents for mutation (like a vector)
</p>
<li><p>dynamic growth in size with basically zero overhead (unlike a vector)
</p>
<li><p>constant time splicing of sequences together (unlike a vector)
</p>
</ul><p></p>
<p>
<a name="node_idx_316"></a>&#8212;procedure: <strong>make-pushdown-stack</strong> <i>-&gt; push-stack</i><br>

<a name="node_idx_318"></a>&#8212;procedure: <strong>make-pushup-stack</strong> <i>-&gt; push-stack</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
These return an empty <i>push-stack</i>. <code class=verbatim>Make-pushdown-stack</code>
returns a <i>push-stack</i> that grows upwards. New items are added to
its last tail. <code class=verbatim>Make-pushup-stack</code> returns a <i>push-stack</i> that
grows downwards. New items are added to its head.
</blockquote><p>
<a name="node_idx_320"></a>&#8212;procedure: <strong>push-stack-empty?</strong> <i>push-stack -&gt; boolean</i><br>
</p>
<p>
<a name="node_idx_322"></a>&#8212;procedure: <strong>push-stack-push</strong> <i>push-stack object -&gt; pointer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Pushes <i>object</i> on to the <i>push-stack</i>. The <i>object</i> may be
anything except an improper list. If the <i>object</i> is a proper list,
the list is spliced to the <i>push-stack&#8217;s</i> head or last tail,
depending on the growth direction of the <i>push-stack</i>. If the
<i>object</i> is the empty-list, nothing is pushed. The <i>pointer</i>
returned is the pair that contains the first item of <i>object</i> in the
<i>push-stack</i>.
</blockquote><p>
<a name="node_idx_324"></a>&#8212;procedure: <strong>push-stack-pointer</strong> <i>push-stack -&gt; pointer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
The <i>pointer</i> is the pair that is the head or last tail of the
<i>push-stack</i>, depending on the <i>push-stack&#8217;s</i> direction.
</blockquote><p>
<a name="node_idx_326"></a>&#8212;procedure: <strong>push-stack-items</strong> <i>push-stack -&gt; list</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Returns the <i>list</i> of items in the <i>push-stack</i>.
</blockquote><p>
<a name="node_idx_328"></a>&#8212;procedure: <strong>push-stack-patch</strong> <i>push-stack pointer object</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Replaces items in <i>push-stack</i> starting at <i>pointer</i> with
<i>object</i>, which may be anything except an improper list. If
<i>object</i> is a proper list, as many items are replaced as the number
of items in the list, with items in the list. Otherwise, the
<i>object</i> replaces one item.
</blockquote><p>
<a name="node_idx_330"></a>&#8212;procedure: <strong>push-stack-push-&gt;patcher</strong> <i>push-stack object -&gt; procedure</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Pushes <i>object</i> on to the <i>push-stack</i> and returns a
<i>procedure</i> of one argument, that when applied, replaces the
<i>object</i> in the <i>push-stack</i> with its argument. That is:
<pre class=verbatim>(let ((ptr (push-stack-push push-stack object)))&nbsp;
  (lambda (new-object)&nbsp;
    (push-stack-patch push-stack ptr new-object)))&nbsp;
</pre><p>
</p>
</blockquote><p>
<a name="node_idx_332"></a>&#8212;procedure: <strong>push-stack-save</strong> <i>push-stack -&gt; thunk</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Encapsulates the state of <i>push-stack</i> in <i>thunk</i>. Applying
<i>thunk</i> restores the <i>push-stack</i> to the saved state. After
<i>thunk</i> is applied any pointers to objects pushed after a save and
before the restore will no longer point in to the <i>push-stack</i>.
</blockquote><p>
<a name="node_idx_334"></a>&#8212;procedure: <strong>push-stack-direction</strong> <i>push-stack -&gt; direction</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Returns a symbol indicating the direction of growth of the
<i>push-stack</i>. If <i>push-stack</i> was created by
<code class=verbatim>make-pushdown-stack</code>, then <code class=verbatim>'up</code> is returned. Otherwise
<code class=verbatim>'down</code> is returned.
</blockquote><p>
<a name="node_idx_336"></a>&#8212;procedure: <strong>push-stack-size</strong> <i>push-stack -&gt; integer</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Returns the number of single items in <i>push-stack</i>.
</blockquote><p>
<a name="node_idx_338"></a>&#8212;procedure: <strong>push-stack-append!</strong> <i>push-stack1 push-stack2</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Effectively appends! the contents of <i>push-stack2</i> to the last
tail of <i>push-stack1</i>, regardless of the growth direction of each
<i>push-stack</i>. It is an error to append! the same <i>push-stacks</i>
more than once, in any order.
</blockquote><p>
<a name="node_idx_340"></a>&#8212;procedure: <strong>push-stack-align</strong> <i>push-stack align fill [offset]</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Pushes <i>fill</i>, which may be anything except a pair, on to
<i>push-stack</i> as many times as necessary such that the following is
true:
<pre class=verbatim>(zero? (modulo (push-stack-size push-stack) align))&nbsp;
</pre><p>
If the optional <i>offset</i> is provided, than instead the following
formula is used:
</p>
<pre class=verbatim>(zero? (modulo (+ offset (push-stack-size push-stack)) align))&nbsp;
</pre><p></p>
<p>
</p>
</blockquote><p>

</p>
<a name="node_sec_7.4"></a>
<h2 class=section><a href="sassy-Z-H-1.html#node_toc_node_sec_7.4">7.4&nbsp;&nbsp;Utilities</a></h2>
<p>
<a name="node_idx_342"></a></p>
<p>
The following are useful for displaying information.</p>
<p>
<a name="node_idx_344"></a>&#8212;procedure: <strong>sassy-hexdump</strong> <i>list-of-bytes</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
Displays the <i>list-of-bytes</i> in the &#8220;canonical&#8221; format, just as if
using <code class=verbatim>hexdump -C</code> on Unix. Useful for viewing the results
returned by the procedures <code class=verbatim>sassy-text-list</code> or <code class=verbatim>sassy-data-list</code>.
</blockquote><p>
<a name="node_idx_346"></a>&#8212;procedure: <strong>sassy-print-symbols</strong> <i>sassy-output</i><br>

<a name="node_idx_348"></a>&#8212;procedure: <strong>sassy-print-relocs</strong> <i>sassy-output</i>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<blockquote>
These procedures display formatted listings of all the information for
each symbol or relocation in <i>sassy-output</i>. If the value in a field
is <code class=verbatim>#f</code>, these procedures display the string <code class=verbatim>``#&lt;undefined&gt;''</code>.
</blockquote><p>

</p>
<div class=footnoterule><hr></div><p></p>
<div class=footnote><p><a name="node_footnote_Temp_20"></a><sup><small><a href="#node_call_footnote_Temp_20">1</a></small></sup> I mention this
because some Schemes are apparently lax about the mutation of parts
of literal lists.</p>
</div>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="sassy.html">first</a>, <a href="sassy-Z-H-7.html">previous</a></span><span>, <a href="sassy-Z-H-9.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="sassy-Z-H-1.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="sassy-Z-H-13.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
